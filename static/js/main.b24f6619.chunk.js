(this.webpackJsonppic2pdf=this.webpackJsonppic2pdf||[]).push([[0],{137:function(e,t,a){e.exports=a(214)},142:function(e,t,a){},163:function(e,t,a){},197:function(e,t,a){},214:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),l=a.n(i),c=(a(142),a(88)),o=a(52),s=a.n(o),u=a(76),p=a(99),m=a(100),d=a(131),f=a(126),h=a(90),g=a(223),v=a(218),w=a(221),b=a(222),E=a(31),y=a(225),k=a(226),x=a(227),j=a(101);function O(e){try{var t=new File([e],e.name,{type:e.type});return t.uid=e.uid,e instanceof Blob||e instanceof File?t:(g.b.error("some error happen"),void console.error("fileObjToFile wrong: \n fileObj \n ".concat(e)))}catch(a){console.log(a)}}function F(e,t){for(var a=[],n=0;n<=e.length;n++)a[n]=new Array(t.length+1),a[n].fill(0);for(var r=0,i=0,l=e.length-1;l>=0;l--)for(var c=t.length-1;c>=0;c--)a[l][c]=e[l]===t[c]?a[l+1][c+1]+1:0,r<a[l][c]&&(r=a[l][c],i=l);return e.substr(i,r)}function I(e){var t=e.lastIndexOf(".");return e.slice(0,-1===t?void 0:t).replace(/[^a-zA-Z0-9\u4e00-\u9fa5]/g," ").trim()}a(163);function N(e){return new Promise((function(t,a){var n=new FileReader;if(!e)return console.log(e),g.b.error("file load fail"),t();n.readAsDataURL(e),n.onload=function(){var e=new Image;e.src=String(n.result),e.onload=function(){var a={imgUrlBase64:String(n.result),imgWidth:e.width,imgHeight:e.height,canvasEle:void 0},r=document.createElement("canvas"),i=r.getContext("2d");return r.width=e.width,r.height=e.height,i?(i.drawImage(e,0,0),t(Object(h.a)(Object(h.a)({},a),{},{canvasEle:r}))):t(a)}},n.onerror=function(e){return a(e)}}))}var L=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={previewVisible:!1,previewImage:"",previewTitle:"",fileList:[],pdfFileName:""},e.handleCancel=function(){return e.setState({previewVisible:!1})},e.handlePreview=function(){var t=Object(u.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.url||a.preview){t.next=5;break}return t.next=3,N(a.originFileObj);case 3:n=t.sent,a.preview=(null===n||void 0===n?void 0:n.imgUrlBase64)||"";case 5:e.setState({previewImage:a.url||a.preview,previewVisible:!0,previewTitle:a.name});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleRemove=function(t){var a=Object(c.a)(e.state.fileList),n=-1;a.some((function(e,a){return e.uid===t.uid&&(n=a,!0)})),-1!==n?(a.splice(n,1),e.setState({fileList:a})):g.b.error("could not find index")},e.handleUpload=function(t){var a=t.file,n=e.state,r=n.fileList,i=n.pdfFileName;if(!r.map((function(e){return e.uid})).includes(a.uid)&&O(a)){a.originFileObj=O(a);var l=i?F(i,I(a.name)):I(a.name);e.setState({fileList:[].concat(Object(c.a)(r),[a]),pdfFileName:l.trim()})}},e._getPdfData=Object(u.a)(s.a.mark((function t(){var a,n,r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((a=e.state.fileList).length<1)){t.next=4;break}return g.b.info("please upload one pic at lease"),t.abrupt("return",[]);case 4:n=[],r=0;case 6:if(!(r<a.length)){t.next=14;break}return t.next=9,N(a[r]);case 9:(i=t.sent)&&n.push(i);case 11:r++,t.next=6;break;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t)}))),e.handleOutputWithImg=Object(u.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._getPdfData();case 2:if(!((a=t.sent).length<1)){t.next=5;break}return t.abrupt("return");case 5:try{n=new j.a("p","px",[a[0].imgWidth,a[0].imgHeight]),a.forEach((function(e,t){0!==t&&n.addPage([e.imgWidth,e.imgHeight]),e.canvasEle?n.addImage(e.canvasEle,0,0,e.imgWidth,e.imgHeight):(g.b.warning("webp pic may have some unknow problem here, please change chrome to have a try"),n.addImage(e.imgUrlBase64,0,0,e.imgWidth,e.imgHeight))})),n.save(e.state.pdfFileName)}catch(r){console.log(r),g.b.error("some unknown errors happen")}case 6:case"end":return t.stop()}}),t)}))),e.handleFileName=function(t){t.persist(),e.setState({pdfFileName:t.target.value})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,i=e.previewTitle,l=e.pdfFileName,c=r.a.createElement("div",null,r.a.createElement(y.a,null),r.a.createElement("div",{style:{marginTop:8}},r.a.createElement("p",null,"Add pic"),r.a.createElement("p",null,"click or drag")));return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{className:"pic-upload",multiple:!0,listType:"picture-card",fileList:n,onPreview:this.handlePreview,customRequest:this.handleUpload,onRemove:this.handleRemove},n.length>=108?null:c),r.a.createElement(w.a,{visible:t,title:i,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})),r.a.createElement("div",null,r.a.createElement(b.a,{placeholder:"pdf filename",maxLength:25,value:l,size:"large",prefix:r.a.createElement(k.a,null),className:"pdf-filename-input",onChange:this.handleFileName,onPressEnter:this.handleOutputWithImg}),r.a.createElement(E.a,{type:"primary",onClick:this.handleOutputWithImg,shape:"round",icon:r.a.createElement(x.a,null),size:"large"},"Get PDF")))}}]),a}(r.a.Component),P=a(220),W=a(219),C=(a(196),a(197),a(228));var S=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(P.a,{className:"site-page-header",title:"pics2pdf",subTitle:"convert multiple pictures to pdf file Locally",backIcon:!1,extra:[r.a.createElement("a",{href:"https://github.com/EGBDFACE/pic2pdf",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(C.a,null))]}),r.a.createElement(L,null),r.a.createElement("div",{className:"tipInfo"},r.a.createElement(W.a,{title:"* support picture format (theoretically)",className:"tipInfoContent",extra:r.a.createElement("a",{href:"https://artskydj.github.io/jsPDF/docs/modules_addimage.js.html",target:"_blank",rel:"noopener noreferrer"},"More"),style:{width:400}},r.a.createElement("p",null,"jpeg"),r.a.createElement("p",null,"png"),r.a.createElement("p",null,"bmp"),r.a.createElement("p",null,"webp"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[137,1,2]]]);
//# sourceMappingURL=main.b24f6619.chunk.js.map